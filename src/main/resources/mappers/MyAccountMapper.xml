<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carnival.matchcube.mapper.MyAccountMapper">

    <select id="myAccount" parameterType="com.carnival.matchcube.dto.MyAccountDTO" resultType="com.carnival.matchcube.dto.MyAccountValueDTO">
        SELECT ae.account_id, nick_name, name, email_id, tm.team_id, ti.team_image_url,
        IF(te.team_leader_id = ae.account_id, '팀장', '팀원') AS isTeamLeader
        FROM account_ex AS ae
        LEFT JOIN team_member AS tm on tm.account_id = ae.account_id
        LEFT JOIN team_ex AS te on te.team_id = tm.team_id
        LEFT JOIN team_image AS ti on ti.team_id = te.team_id
        WHERE ae.account_id = #{accountId};
    </select>

    <select id="myTeam" parameterType="com.carnival.matchcube.dto.MyAccountDTO" resultType="com.carnival.matchcube.dto.MyTeamValueDTO">
        SELECT relation_id,
        team_id,
        account_id,
        link_number,
        status,
        is_accept,
        register_at
        FROM team_user
        WHERE account_id=#{accountId}
        AND status=1
        AND is_accept!=0;
    </select>

</mapper>